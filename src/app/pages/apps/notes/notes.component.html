<mat-card class="mat-card-top notes-app cardWithShadow overflow-hidden">
  <mat-sidenav-container [ngClass]="{
      'side-panel-opened': sidePanelOpened(),
      'side-panel-closed': !sidePanelOpened()
    }" class="h-full">
    <mat-sidenav #noteslist [mode]="isOver() ? 'over' : 'side'" [opened]="!isOver()" (open)="sidePanelOpened.set(true)"
      (close)="sidePanelOpened.set(false)" style="width: 290px">
      <div class="p-4">
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <div class="flex gap-3">
            <i class="iconify size-5.5!" data-icon="solar:magnifer-line-duotone"></i>
            <input matInput type="text" (keyup)="applyFilter($event)" placeholder="Search Notes" />
          </div>
        </mat-form-field>
      </div>
      <ng-scrollbar class="relative" style="height: calc(100vh - 350px)">
        <h4 class="text-base font-semibold px-4 mt-4">All Notes</h4>

        <mat-nav-list class="stats-wrapper px-4!">
          @if(notes().length > 0) { @for(note of notes(); track note.datef) {
          <mat-list-item class="notes-item cursor-pointer stat-item rounded-sm mb-2 bg-light-{{ note.color }}"
            (click)="onSelect(note)" [class.selected]="note === selectedNote()">
            <span class="note-title w-[175px] h-[35px] text-[16px] truncate block font-medium text-{{ note.color }}"
              matListItemTitle>{{ note.title }}</span>
            <div class="flex justify-between">
              <span class="note-time block text-xs font-medium">{{
                note.datef | date
                }}</span>
              <span (click)="removenote(note); $event.stopPropagation()" class="remove-note cursor-pointer"
                matTooltip="Delete">
                <i-tabler name="trash" class="size-4!"></i-tabler>
              </span>
            </div>
          </mat-list-item>
          } } @else {
          <div class="p-4 bg-light-primary text-primary rounded-sm mt-5 text-center">
            <span class="m-0 text-sm">No Notes Found</span>
          </div>
          }
        </mat-nav-list>
      </ng-scrollbar>
    </mat-sidenav>
    <mat-toolbar class="border-b border-border">
      <div class="flex items-center justify-between w-full">
        <button (click)="noteslist.toggle()" class="flex!" mat-icon-button>
          <i-tabler name="menu-2" class="size-5!"></i-tabler>
        </button>
        <button mat-flat-button (click)="addNoteClick()">Add Notes</button>
      </div>
    </mat-toolbar>
    <ng-scrollbar class="relative" style="height: calc(100vh - 320px)">
      <mat-card-content>
        @if(selectedNote()){
        <div>
          <h4 class="text-base font-semibold mb-4!">Edit Note</h4>
          <mat-form-field appearance="outline" class="w-full p-0!">
            <textarea matInput [ngModel]="selectedNote()?.title" rows="5" class="note-content p-2!"
              (ngModelChange)="updateNoteTitle($event)"></textarea>
          </mat-form-field>
          <h4 class="text-base font-semibold mb-4!">Change Note Color</h4>
          <div class="flex items-center">
            @for(c of colors; track c.colorName) {
            <div class="Selectbuttoncolor relative">
              <button mat-mini-fab class="bg-{{ c.colorName }} rounded-full size-6! me-2 w-[27px]! h-[27px]!"
                (click)="onSelectColor(c.colorName)" [ngClass]="{
                  selectColorResizable: selectedColor() === c.colorName
                }"></button>
              @if(selectedColor() === c.colorName) {
              <div>
                <mat-icon
                  class="checkIcon absolute top-[4px] left-0 rtl:left-auto rtl:right-0 text-white! text-lg! overflow-hidden flex! items-center justify-center">check</mat-icon>
              </div>
              }
            </div>
            }
          </div>
        </div>
        } @else{

        <div class="flex items-center justify-center h-full w-full">
          <div>
            <img src="/assets/images/breadcrumb/emailSv.png" width="250px" />
            <h3 class="text-[21px] font-semibold text-center mt-5">No note selected</h3>
          </div>
        </div>
        }
      </mat-card-content>
    </ng-scrollbar>
  </mat-sidenav-container>
</mat-card>