<!-- ------------------------------------------------------------------ -->
<!-- Add new contact -->
<!-- ------------------------------------------------------------------ -->
<mat-dialog-content class="mat-typography">
  <div class="flex items-center justify-between mb-4">
    <h4 class="text-base font-semibold mb-4">Add New Contact</h4>
    <button mat-icon-button mat-dialog-close class="flex justify-center">
      <i-tabler name="x" class="size-5! flex"></i-tabler>
    </button>
  </div>

  <form>
    <div class="file-input-container mb-6 relative uploader">
      @if(imageUrl){
      <img [src]="imageUrl" alt="Selected Image" width="100"
        class="rounded-sm upload-image w-[100px] h-auto! cursor-pointer" />
      }
      <input class="absolute left-0 top-0 w-full h-full opacity-0 cursor-pointer" type="file"
        (change)="onFileSelected($event)" accept="image/*" />
    </div>

    <div class="grid grid-cols-12 gap-6">
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">First Name</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.firstname" name="firstname" placeholder="First Name" />
        </mat-form-field>
      </div>
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">Last Name</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.lastname" name="lastname" placeholder="Last Name" />
        </mat-form-field>
      </div>
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">Company Name</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.company" name="company" placeholder="Company Name" />
        </mat-form-field>
      </div>
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">Phone Number</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.phone" name="phone" placeholder="Phone Number" />
        </mat-form-field>
      </div>
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">Email</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.email" name="email" type="email" placeholder="Email" />
        </mat-form-field>
      </div>
      <div class="col-span-12 md:col-span-6">
        <mat-label class="text-sm font-semibold mb-2 block">Address</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <input matInput [(ngModel)]="contact.address" name="address" placeholder="Address" />
        </mat-form-field>
      </div>
      <div class="col-span-12">
        <mat-label class="text-sm font-semibold mb-2 block">Notes</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <textarea matInput [(ngModel)]="contact.notes" name="notes" placeholder="Notes"></textarea>
        </mat-form-field>
      </div>
      <div class="col-span-12">
        <mat-label class="text-sm font-semibold mb-2 block">Department</mat-label>
        <mat-form-field appearance="outline" class="w-full hide-hint">
          <mat-select [(ngModel)]="contact.department" name="department">
            @for(dept of departments; track dept.id) {
            <mat-option [value]="dept.name">{{ dept.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </form>
</mat-dialog-content>
<div mat-dialog-actions>
  <button mat-flat-button color="primary" (click)="saveContact()" [disabled]="!isFormValid()">
    Add Contact
  </button>
  <button mat-flat-button class="bg-error text-white!" (click)="cancel()">
    Cancel
  </button>
</div>